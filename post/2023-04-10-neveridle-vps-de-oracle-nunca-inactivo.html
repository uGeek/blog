<head>
<title>NeverIdle. VPS de Oracle nunca inactivo. uGeek Blog </title> 
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" /> 
<meta name="viewport" content="width=device-width, initial-scale=1" /> 
<link rel="icon" href="https://ugeek.github.io/icon/ugeek.png" type="image/png" sizes="32x32">
<div id="logo"><a href="https://ugeek.github.io/blog"><img src="https://ugeek.github.io/blog/icon/ugeek.png" style="width: 90px; height: 90px; display: block;" alt="uGeek Logo"></a></div> 
<link rel="stylesheet" type="text/css" href="../css/stylesheet.css" /> 
<link rel="alternate" type="application/rss+xml" href="https://ugeek.github.io/blog/feed.xml" title="uGeek Blog ">
<link rel="shortcut icon" href="https://ugeek.github.io/bloghttps://ugeek.github.io/icon/ugeek-256x256.png" type="image/x-icon" /> 
<link rel="apple-touch-icon-precomposed" href="https://ugeek.github.io/icon/ugeek.png" /> 
<meta property="og:locale" content="es_ES" />
<meta name="robots" content="index, follow"> 
<meta name="twitter:site" content="@ugeekpodcast" /> 
<meta name="twitter:card" content="summary_large_image" /> 
<link rel="alternate" type="application/rss+xml" title="uGeek Blog " href="https://ugeek.github.io/blog/feed/" />
<meta name="author" content=""> 
<meta name="description" content="** VPS de Oracle y las cuentas Oracle Cloud Free Tier" />
<meta property="og:site_name" content="uGeek Blog "/> 
<meta property="og:type" content="article" /> 
<meta property="og:title" content="NeverIdle. VPS de Oracle nunca inactivo" /> 
<meta property="og:description" content="** VPS de Oracle y las cuentas Oracle Cloud Free Tier" /> 
<meta property="og:image" content="https://ugeek.github.io/blog/images-blog/ugeek.png" /> 
<meta property="og:url" content="https://ugeek.github.io/blog/post/2023-04-10-neveridle-vps-de-oracle-nunca-inactivo.html" />
<meta name="twitter:title" content="NeverIdle. VPS de Oracle nunca inactivo" /> 
<meta name="twitter:description" content="** VPS de Oracle y las cuentas Oracle Cloud Free Tier" /> 
<meta name="twitter:image" content="https://ugeek.github.io/blog/images-blog/ugeek.png" />
<link rel="stylesheet" type="text/css" href="../css/stylesheet.css" />
<link rel="alternate" type="application/rss+xml" href="https://ugeek.github.io/blog/feed.xml" title="uGeek Blog ">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag("js", new Date()); gtag("config", ""); </script>
<link type="text/css" rel="stylesheet" href="../css/search.css"></link> 
<link rel="stylesheet" type="text/css" href="../css/stylesheet.css" /> 
<script type="text/javascript" src="../js/jquery.min.js"></script> 
<script type="text/javascript" src="../js/tipuesearch_set.js"></script> 
<script type="text/javascript" src="../content.js"></script> 
<script type="text/javascript" src="../js/tipuesearch.min.js"></script>
</head>
<br><br><br><br><br><br><br><br><br>
<link href="http://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css"/><div id="name"><a href="https://ugeek.github.io/"><tt>Blog del Podcast</tt></div></a><div id="icon"><a href="https://ugeek.github.io/podcast.xml" title="rss" alt="rss"><img src="../icon/podcast.png"  width="25" height="25" alt="podcast"></a>&nbsp;&nbsp;<a href="https://ugeek.github.io/feed.xml" alt="rss"><img src="../icon/rss.png"  width="25" height="25"></a>&nbsp;&nbsp;<a href="https://github.com/ugeek"><img src="../icon/github.png"  width="25" height="25" alt="GitHub"></a>&nbsp;&nbsp;<a href="https://hub.docker.com/search?q=ugeek&type=image" alt="rss"><img src="../icon/docker.png"  width="25" height="25"></a>&nbsp;&nbsp;<a href="https://twitter.com/ugeekpodcast"><img src="../icon/twitter.png"  width="25" height="25" alt="Twitter"></a>&nbsp;&nbsp;<a href="https://t.me/uGeek"><img src="../icon/telegram.png"  width="25" height="25" alt="Telegram"></a></div><div id="menu"><a href="https://ugeek.github.io/blog/list.html"><tt>Artículos</tt></a>&nbsp;&nbsp;<a href="https://ugeek.github.io/list.html"><tt>Podcasts</tt></a>&nbsp;&nbsp;<a href="https://ugeek.github.io/blog/tag.html"><tt>Tags</tt></a></div>
<!-- SEARCH BOX -->
<input type="text" name="q" placeholder="buscar..." id="tipue_search_input" required> 
<div align="center" id="tipue_search_content"></div> 
<script>
$(document).ready(function() { $("#tipue_search_input").tipuesearch(); });
</script>
<h1 id="neveridle-vps-de-oracle-nunca-inactivo">NeverIdle. VPS de Oracle nunca inactivo</h1>
<h2 id="vps-de-oracle-y-las-cuentas-oracle-cloud-free-tier">VPS de Oracle y las cuentas Oracle Cloud Free Tier</h2>
<p>Algunos usuarios han recibido un aviso de Oracle Cloud Free Tier, que consiste en un servicio gratuito de Oracle Cloud Infrastructure (OCI) que ofrece recursos limitados de computación, almacenamiento y red, entre otros. El aviso les informa de que OCI va a reclamar los recursos de computación que hayan estado inactivos durante más de una semana, y que estos recursos serán detenidos en una fecha determinada. También les sugiere que conviertan su cuenta a un plan de pago por uso (PAYG), con el que no tendrán que pagar nada si se mantienen dentro de los límites de Always Free, pero evitarán que sus recursos inactivos sean detenidos.</p>
<p>Esta medida se debe a que OCI quiere optimizar el uso de los recursos para ofrecer un mejor servicio a los clientes de Always Free, y que se basa en unos criterios de inactividad que tienen en cuenta la utilización de la CPU, la red y la memoria de las instancias de computación. Esta medida se anunció previamente en la página web de OCI, pero que luego desapareció y volvió a aparecer.</p>
<p>Recomienda a los usuarios de Free Tier que actualicen su cuenta a PAYG si quieren conservar sus recursos inactivos, pero advierte de que puede haber dificultades para hacerlo si se usan tarjetas prepago, se oculta la ubicación o la identidad, o se introducen datos incompletos o inexactos. </p>
<h3 id="recuperación-de-instancias-de-computación-inactivas">Recuperación de instancias de computación inactivas</h3>
<p>Las instancias de computación Always Free que estén inactivas podrán ser recuperadas por Oracle. Oracle considerará que las instancias están inactivas si, durante un período de 7 días, se cumplen las siguientes condiciones:</p>
<ul>
<li>La utilización de la CPU para el percentil 95 es inferior al 10%</li>
<li>La utilización de la red es inferior al 10%</li>
<li>La utilización de la memoria es inferior al 10% (solo se aplica a las formas A1)</li>
</ul>
<h2 id="que-es-neveridle">Que es NeverIdle</h2>
<p>NeverIdle es un programa diseñado para desperdiciar recursos de la computadora con el objetivo de evitar que la cuenta de usuario sea eliminada por inactividad en servicios en línea que requieren que la cuenta esté activa. El programa es una solución simple para aquellos que necesitan mantener la cuenta activa en servicios que requieren un uso frecuente pero no tienen la capacidad o el tiempo para hacerlo manualmente.</p>
<p>El programa cuenta con un script de un solo clic para su instalación en sistemas Linux. El script por defecto ejecuta comandos para desperdiciar recursos de la CPU, memoria y red de manera periódica. Estos comandos son configurables a través de parámetros, lo que permite a los usuarios ajustar la cantidad y frecuencia de desperdicio de recursos según sus necesidades.</p>
<p>Los parámetros disponibles incluyen la frecuencia de uso de la CPU y memoria, la cantidad de memoria que se quiere desperdiciar y la frecuencia de uso de la red. También es posible configurar el número de conexiones en paralelo y la prioridad del proceso.</p>
<p>Una vez que se ejecuta el programa, se pueden observar los efectos inmediatos del desperdicio de recursos. Sin embargo, se debe tener en cuenta que el programa no cubre todas las necesidades y no garantiza que la cuenta permanezca activa en todos los servicios en línea. Además, su uso indebido o en exceso puede dañar el hardware de la computadora y afectar negativamente el rendimiento del sistema. Por lo tanto, es importante utilizar NeverIdle con precaución y responsabilidad.</p>
<h2 id="instalación-de-go">Instalación de Go</h2>
<p>Primero miraremos que procesador tenemos, si es ARM o AMD64</p>
<pre><code class="language-sh">
uname -m
</code></pre>
<p>Ahora dependiendo del procesador, descargaremos y instalaremos la última versión de Go. Descargamos la versión más reciente <a href="https://golang.org/doc/install">desde la página de go</a>, al dia de la publicación de este artículo, vamos por la versión 1.20.3, que es la que utilizo en el ejemplo.</p>
<h3 id="arm64">ARM64</h3>
<pre><code class="language-sh">
wget https://storage.googleapis.com/golang/go1.20.3.linux-arm64.tar.gz                                                            sudo tar -C /usr/local -xvf go1.20.3.linux-arm64.tar.gz
</code></pre>
<h3 id="amd64">AMD64</h3>
<pre><code class="language-sh">
wget https://storage.googleapis.com/golang/go1.20.3.linux-amd64.tar.gz
sudo tar -C /usr/local -xvf go1.20.3.linux-amd64.tar.gz
</code></pre>
<p>Ahora debes establecer las rutas en tu entorno.</p>
<p>En primer lugar, debes establecer el valor raíz de Go, que le indica a Go dónde buscar sus archivos. Puedes hacerlo editando el archivo ".profile", que contiene una lista de comandos que el sistema ejecuta cada vez que inicias sesión. Usa tu editor preferido para abrir ".profile", que se encuentra en el directorio de inicio de tu usuario. Aquí, usaremos nano:</p>
<pre><code class="language-sh">
nano ~/.profile
</code></pre>
<p>Luego, agregas la siguiente información al final de tu archivo:</p>
<pre><code class="language-sh">
export PATH=$PATH:/usr/local/go/bin
</code></pre>
<p>Después de agregar esta información a tu perfil, guarda y cierra el archivo. Si usaste nano, hazlo presionando CTRL+X, luego Y y finalmente ENTER. A continuación, actualiza tu perfil ejecutando el siguiente comando:</p>
<pre><code class="language-sh">
source ~/.profile
</code></pre>
<p>Finalmente, verifica si puedes ejecutar comandos de Go ejecutando "go version":</p>
<pre><code class="language-sh">
go version
</code></pre>
<p>Este comando mostrará el número de versión de la versión de Go instalada en tu sistema</p>
<h2 id="instalación-de-neveridle">Instalación de NeverIdle</h2>
<h3 id="arm-server">ARM Server</h3>
<pre><code class="language-sh">
wget https://github.com/layou233/NeverIdle/releases/download/0.2.3/NeverIdle-linux-arm64 -O NeverIdle
</code></pre>
<h3 id="amd-server">AMD Server</h3>
<pre><code class="language-sh">
wget https://github.com/layou233/NeverIdle/releases/download/0.2.3/NeverIdle-linux-amd64 -O NeverIdle
</code></pre>
<h2 id="probando-neveridle">Probando NeverIdle</h2>
<p>Damos permisos de ejecución:</p>
<pre><code class="language-sh">
chmod +x NeverIdle
</code></pre>
<p>Ahora ya podemos ejecutar el scritp. Utilizaremos este ejemplo:</p>
<pre><code class="language-sh">
./NeverIdle -c 2h1m2s -m 2 -n 4h
</code></pre>
<ul>
<li>-c : para consumo de CPU. cada 2 horas 1 minuto 2 segundos (el formato es 2h1m2s), desperdiciará CPU una vez</li>
<li>-cp: Si el desperdicio máximo quieres que sea del 20% de la CPU, tiene que tener el valor -cp 0.2. El rango de valores del porcentaje es [0,1]. </li>
<li>-m : habilita la ocupación de memoria. 2 significa 2GB</li>
<li>-n : se ejecuta una vez en la red de residuos para la prueba de velocidad de Ookla. Mostrará la salida en su pantalla.</li>
</ul>
<h2 id="comprobar-que-el-script-funciona-y-dejarlo-en-segundo-plano">Comprobar que el script funciona y dejarlo en segundo plano</h2>
<p>Ejecuta el siguiente comando:</p>
<pre><code>
ps aux | grep NeverIdle
</code></pre>
<p>Yo estoy utilizando un script que utiliza screen que os hable hace mucho tiempo y que me permite dejar NeverIdle en segundo plano.</p>
<p>Instalación</p>
<pre><code>
bash &lt;(curl https://raw.githubusercontent.com/uGeek/s-screen/main/s) install debian
</code></pre>
<p>El artículo del funcionamiento lo encontrareis en: <a href="https://ugeek.github.io/blog/post/2020-10-28-s-screen-gestionando-mis-procesos-en-segundo-plano-de-un-modo-sencillo.html">https://ugeek.github.io/blog/post/2020-10-28-s-screen-gestionando-mis-procesos-en-segundo-plano-de-un-modo-sencillo.html</a></p>
<p>También te recomiendo añadir a tu crontab para que arranque al reinicio:</p>
<pre><code>
@reboot ( sleep 100 ; screen -dmS NeverIdle /home/ubuntu/NeverIdle -c 1h59m17s -m 2 -n 3h35m20s )
</code></pre>
<p>Yo he dejado el script en la raíz del $HOME.</p>
<p>El comando sería:</p>
<p>A modo de comando:</p>
<pre><code>
screen -dmS NeverIdle /home/ubuntu/NeverIdle -c 1h59m17s -m 2 -n 3h35m20s
</code></pre>
<h2 id="añadiendolo-a-tu-sistema">Añadiendolo a tu sistema</h2>
<p>A mi me gusta integrarlo como una aplicación del sistema y lo hago del siguiente modo creando un enlace simbólico</p>
<pre><code>
sudo ln -s /home/ubuntu/NeverIdle /usr/bin/NeverIdle
</code></pre>
<h2 id="aplicando-un-20-de-cpu-durante-20-segundos">Aplicando un 20% de CPU durante 20 segundos</h2>
<pre><code>
timeout 20s NeverIdle -cp 0.2
</code></pre>
<h2 id="crontab-cada-hora-random">Crontab cada hora random</h2>
<p>Cada hora a las 00 minutos, eligirá un minuto al azahar para ejecutar el 20% de CPU durante 20 segundos</p>
<pre><code>
00 * * * * MINUTO=$(shuf -i 0-59 -n 1) ; sleep $MINUTOm ; timeout 20s NeverIdle -cp 0.2
</code></pre>
<h2 id="docker-compose">Docker Compose</h2>
<p>Si tienes docker en tu vps, todo será mucho más facil.</p>
<p>Crea este docker Compose:</p>
<pre><code>
version: '2'
services:
  neveridle:
    container_name: neveridle
    hostname: neveridle
    image: ghcr.io/m3chd09/neveridle
    command: /app/NeverIdle -c 2h -m 3 -n 4h
    restart: always
    volumes:
      - /etc/ssl/certs/ca-certificates.crt:/etc/ssl/certs/ca-certificates.crt:ro
</code></pre>
<p>La linea de "command" está configurada para que gaste CPU cada 2h (-c 2h), que gaste 2GiB memoria (-m 2) y que gaste red, con un test de velocidad, cada 4h (-n 4h), pero si lo vais a ejecutar en una instancia que no sea ARM se debe quitar la parte de la memoria por un lado porque no cuenta para considerarla sin uso por parte de Oracle y por otro lado importante porque esas instancias tienen 1GB de RAM y si le dejas, eso te la deja frita al intentar gastar 2GB de RAM.</p>
<p>Por cortesia de @Rapejim</p>
<h2 id="fuentes">Fuentes</h2>
<ul>
<li><a href="https://github.com/layou233/NeverIdle">https://github.com/layou233/NeverIdle</a></li>
<li><a href="https://www.youtube.com/watch?v=nEwGDrocrg4">https://www.youtube.com/watch?v=nEwGDrocrg4</a></li>
<li><a href="https://blog.51sec.org/2023/02/oracle-cloud-cleaning-up-idle-compute.html">https://blog.51sec.org/2023/02/oracle-cloud-cleaning-up-idle-compute.html</a></li>
</ul>
<p>Publicado por Angel el Monday 10 April del 2023</p>
<p>También te puede interesar:</p>
<ul>
<li><a href="https://ugeek.github.io/blog/post/2021-05-24-homer-mi-dashboard.html">Homer. Mi Dashboard</a></li>
<li><a href="https://ugeek.github.io/blog/post/2020-06-08-sincronizacion-con-rclone-via-ssh-sftp.html">Sincronización con Rclone via SSH y SFTP</a></li>
<br><br><br>
<p style="text-align: center;">Powered by <a href="https://github.com/ugeek/org-bash-blog" target="_blank" rel="noopener">org-bash-blog</a></p>
<p style="text-align: center;">Written in OrgMode with Emacs and converted to HTML with Pandoc</p>
<p style="text-align: center;"><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" rel="license"><img style="border-width: 0px; display: block; margin-left: auto; margin-right: auto;" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" alt="Licencia de Creative Commons" /></a><br />Este obra est&aacute; bajo una <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" rel="license">licencia de Creative Commons Reconocimiento-NoComercial-CompartirIgual 4.0 Internacional</a>.</p><br><br><br>