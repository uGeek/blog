<head>
<title>Docker. Servidor SSH para conectarte por SFTP. uGeek Blog </title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<div id="logo"><a href="https://ugeek.github.io"><img src="../icon/ugeek.png" border="0"  width="90" height="90" alt="uGeek"></a></div>
<link rel="stylesheet" type="text/css" href="../css/stylesheet.css" />
<link rel="alternate" type="application/rss+xml" href="https://ugeek.github.io/blog/feed.xml" title="uGeek - Blog de Tecnología">

<link rel="shortcut icon" href="https://ugeek.github.io/bloghttps://ugeek.github.io/icon/ugeek-256x256.png" type="image/x-icon" />
<link rel="icon" href="https://ugeek.github.io/bloghttps://ugeek.github.io/icon/ugeek-256x256.png" sizes="32x32" />
<link rel="icon" href="https://ugeek.github.io/bloghttps://ugeek.github.io/icon/ugeek-256x256.png" sizes="192x192" />
<link rel="apple-touch-icon-precomposed" href="https://ugeek.github.io/bloghttps://ugeek.github.io/icon/ugeek-256x256.png" />
<meta property="og:locale" content="es_ES" />



<meta name="robots" content="index, follow">
<meta name="twitter:site" content="@ugeekpodcast" />
<meta name="twitter:card" content="summary_large_image" />
<link rel="alternate" type="application/rss+xml" title="uGeek. Blog de Tecnología" href="https://ugeek.github.io/blog/feed/" />


<meta name="author" content="Angel">
<meta name="description" content="Me he encontrado con un dilema cuando he montado ownCloud y es que antes tenía directorios en mi Raspberry con los que editaba mis orgmode, todo.txt, que ahora están dentro" />


<meta property="og:site_name" content="uGeek Blog "/>
<meta property="og:type" content="article" /> 
<meta property="og:title" content="Docker. Servidor SSH para conectarte por SFTP" />
<meta property="og:description" content="Me he encontrado con un dilema cuando he montado ownCloud y es que antes tenía directorios en mi Raspberry con los que editaba mis orgmode, todo.txt, que ahora están dentro" />
<meta property="og:image" content="https://ugeek.github.io/blog/images-blog/sftp.png" />
<meta property="og:url" content="https://ugeek.github.io/blog/post/2021-02-06-docker-servidor-ssh-para-conectarte-por-sftp.html" />

<meta name="twitter:title" content="Docker. Servidor SSH para conectarte por SFTP" />
<meta name="twitter:description" content="Me he encontrado con un dilema cuando he montado ownCloud y es que antes tenía directorios en mi Raspberry con los que editaba mis orgmode, todo.txt, que ahora están dentro" />
<meta name="twitter:image" content="https://ugeek.github.io/blog/images-blog/sftp.png" />


<link rel="stylesheet" type="text/css" href="css/stylesheet.css" /><link rel="alternate" type="application/rss+xml" href="https://ugeek.github.io/feed.xml" title="uGeek - Blog de Tecnología">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-131560140-1"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag("js", new Date())
gtag("config", "UA-131560140-1");
</script>


<link type="text/css" rel="stylesheet" href="../css/search.css"></link>
<link rel="stylesheet" type="text/css" href="../css/stylesheet.css" />
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/tipuesearch_set.js"></script>
<script type="text/javascript" src="../content.js"></script>
<script type="text/javascript" src="../js/tipuesearch.min.js"></script>


</head>

<br><br><br><br><br><br><br><br><br>

 <link href="http://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css"/> <div id="name"><a href="https://ugeek.github.io/"><tt>Blog del Podcast</tt></div></a> <div id="icon"> <a href="http://feeds.feedburner.com/uGeek" title="rss" alt="rss"><img src="../icon/podcast.png" width="25" height="25" alt="podcast"></a>&nbsp;&nbsp; <a href="http://feeds.feedburner.com/uGeekBlog" alt="rss"><img src="../icon/rss.png" width="25" height="25"></a>&nbsp;&nbsp; <a href="https://github.com/ugeek"><img src="../icon/github.png" width="25" height="25" alt="GitHub"></a>&nbsp;&nbsp; <a href="https://hub.docker.com/search?q=ugeek&type=image" alt="rss"><img src="../icon/docker.png" width="25" height="25"></a>&nbsp;&nbsp; <a href="https://twitter.com/ugeekpodcast"><img src="../icon/twitter.png" width="25" height="25" alt="Twitter"></a>&nbsp;&nbsp; <a href="https://t.me/uGeek"><img src="../icon/telegram.png" width="25" height="25" alt="Telegram"></a></div> <div id="menu"> <a href="https://ugeek.github.io/blog/list.html"><tt>Artículos</tt></a>&nbsp;&nbsp; <a href="https://ugeek.github.io/list.html"><tt>Podcasts</tt></a>&nbsp;&nbsp; <a href="https://ugeek.github.io/blog/tag.html"><tt>Tags</tt></a></div>


<!-- THIS IS THE SEARCH BOX -->


<input type="text" name="q" placeholder="buscar..."  id="tipue_search_input"  required>
<!-- <input type="text" name="q" id="tipue_search_input" autocomplete="off" required> -->

<!-- THIS IS WHERE YOU DISPLAY THE SEARCH RESULTS -->
<div align="center" id="tipue_search_content"></div>
<!-- THIS JAVASCRIPT CODE DISPLAY THE SEARCH RESULTS -->
<script>

$(document).ready(function() {
$("#tipue_search_input").tipuesearch();
});

</script>

<!-- END BOX -->




<h1 id="docker.-servidor-ssh-para-conectarte-por-sftp-1" title="Docker. Servidor SSH para conectarte por SFTP" data-export_file_name="docker-servidor-ssh-para-conectarte-por-sftp" data-description="Me he encontrado con un dilema cuando he montado ownCloud y es que antes tenía directorios en mi Raspberry con los que editaba mis orgmode, todo.txt, que ahora están dentro" data-export_date="2021-02-06 18:30" data-category="ssh" data-tag="bash,servidor" data-image="./images-blog/sftp.png">Docker. Servidor SSH para conectarte por SFTP</h1>
<h5>Tiempo estimado de lectura: 4 minutos. 532 palabras.    <a href="https://ugeek.github.io/blog/categories/ssh">ssh</a></h5>
<p>Me he encontrado con un dilema cuando he montado ownCloud y es que antes tenía directorios en mi Raspberry con los que editaba mis orgmode, todo.txt, que ahora están dentro de la nube y no los puedo editar.</p>
<p>Para solucionar este problema, he creado un docker con un servidor SSH para conectarme via SFTP. De esta manera también soluciono el problema que me comento un oyente, de como crear un servidor para conectarse a un directorio remoto cifrando el tráfico, todo ello dentro de una red local.</p>
<center>
<p><img src="../images-blog/sftp.png" /></p>
</center>
<p>Este docker va a permitir el compartir un directorio local con el servidor SSH, solo aquel que necesito acceder, sin tener que conectarnos a la máquina host.</p>
<p>Mediante el almacenamiento externo de ownCloud, voy a conectarme a este docker por SFTP y con esto ganaré el tener los archivos fuera de la nube ownCloud y mantener todas las ventajas de mi nube como el control de versiones.</p>
<p>He creado el docker para varias arquitecturas partiendo de un Alpine Linux, lo que significa que la imágen tan solo tiene 11mb de tamaño y no consume nada en reposo.</p>
<h2 id="docker-para-raspberry-o-arm">Docker para Raspberry o ARM</h2>
<pre class="example"><code>docker run -d --name=ssh -p 7777:22 -v /nube:/nube  ugeek/ssh:arm
</code></pre>
<p>Por defecto:</p>
<ul>
<li>usuario: root</li>
<li>contraseña: EntraenlaMatrix</li>
</ul>
<h2 id="docker-para-amd64">Docker para AMD64</h2>
<pre class="example"><code>docker run -d --name=ssh -p 7777:22 -v /nube:/nube  ugeek/ssh:amd64
</code></pre>
<p>Por defecto:</p>
<ul>
<li>usuario: root</li>
<li>contraseña: EntraenlaMatrix</li>
</ul>
<h2 id="conectate-al-servidor">Conectate al servidor</h2>
<p>Para conectarse al servidor con Linux:</p>
<pre><code>ssh root@localhost -p 7777
</code></pre>
<p>Si nuestra ip fuera 192.168.1.100:</p>
<pre><code>ssh root@192.168.1.100 -p 7777
</code></pre>
<h2 id="cambiar-contraseña">Cambiar Contraseña</h2>
<p><code>EntraenlaMatrix</code> es la contraseña por defecto, pero quizás quieras cambiarla por una que decidas tu. </p>
<p>Vamos a cambiar la contraseña.  Para hacer esto, tenemos que utilizar el comando <code>passwd.</code></p>
<p>Podemos hacerlo con un solo comando con:</p>
<pre class="example"><code>docker exec -it ssh passwd
</code></pre>
<p>Ahora pedirá que pongamos la nueva contraseña que queremos utilizar, la introducimos dos veces y ya está.</p>
<h2 id="archivo-de-configuración-de-ssh">Archivo de configuración de ssh </h2>
<p>El archivo de configuración del servidor ssh, lo podemos encontrar en <strong>/etc/ssh/ssh_config</strong>.</p>
<h2 id="enviando-las-llaves-para-no-utilizar-contraseña">Enviando las  llaves para no utilizar contraseña</h2>
<p>Para no tener que escribir la contraseña cada vez y para darle más seguridad a nuestro servidor, vamos añadir la llave pública en nuestro servidor.</p>
<p>Creamos directorio de configuración ssh</p>
<pre class="example"><code>docker exec -it ssh mkdir /root/.ssh
</code></pre>
<p>Creamos el archivo <strong>authorized_keys</strong> y añadimos id_*rsa.pub* de nuestra máquina local</p>
<pre class="example"><code>docker exec -it ssh vi /root/.ssh/authorized_keys
</code></pre>
<p>Ahora solo falta que envíes o añadas añadas la llave pública del servidor.</p>
<h2 id="fuentes">Fuentes</h2>
<p>El Dockerfile de este contenedor, lo he extraído de un repositorio del GitHub <a href="https://github.com/AzagraMac/alpine-ssh">https://github.com/AzagraMac/alpine-ssh</a></p>
<br>
<p>Publicado por Angel el Saturday 06 February del 2021</p>
<br><br> 
<p>También te puede interesar:</p>
<ul>
<li><a href="https://ugeek.github.io/blog/post/2021-02-06-docker-servidor-ssh-para-conectarte-por-sftp.html">Docker. Servidor SSH para conectarte por SFTP</a></li>
<li><a href="https://ugeek.github.io/blog/post/2020-12-07-conectandote-por-ssh-introduciendo-la-contrasena-en-una-unica-linea-de-terminal.html">Conectándote por SSH introduciendo la contraseña en una única línea de terminal</a></li>
<li><a href="https://ugeek.github.io/blog/post/2020-06-22-cliente-de-escritorio-para-editar-archivos-de-una-nube-privada-(webdav-nextcloud--)-o-publica-(drive-dropbox-onedrive--)-con-rclone.html">Cliente de escritorio para editar archivos de una nube privada (WebDav, Nextcloud,…) o pública (Drive, Dropbox, OneDrive…) con rclone</a></li>
<li><a href="https://ugeek.github.io/blog/post/2020-06-08-sincronizacion-con-rclone-via-ssh-sftp.html">Sincronización con Rclone via SSH y SFTP</a></li>
<li><a href="https://ugeek.github.io/blog/post/2020-01-15-editor-de-texto-nano.html">Editor de Texto Nano</a></li>
<li><a href="https://ugeek.github.io/blog/post/2019-12-11-instalando-ssh-en-fedora-centos-o-redhat.html">Instalando SSH en Fedora, Centos o RedHat</a></li>
<li><a href="https://ugeek.github.io/blog/post/2019-11-09-simplifica-o-abrevia-tus-conexiones-ssh.html">Simplifica o abrevia tus conexiones SSH</a></li>
<li><a href="https://ugeek.github.io/blog/post/2019-10-31-habilitar-ssh-en-la-raspberry-sin-conectar-el-monitor.html">Habilitar SSH en la Raspberry sin conectar el Monitor</a></li>
<li><a href="https://ugeek.github.io/blog/post/2019-09-17-instalar-telegram-desktop-y-rclone-browser.html">Instalar Telegram Desktop y Rclone Browser en una Raspberry Pi o Servidor</a></li>
<li><a href="https://ugeek.github.io/blog/post/2019-09-16-listado-de-servicios-con-system-v-y-systemd.html">Listado de Servicios con System V y Systemd</a></li>
</ul>
<br><br><br><p style="text-align: center;">Powered by <a href="https://github.com/ugeek/org-bash-blog" target="_blank" rel="noopener">org-bash-blog</a></p><p style="text-align: center;">Writing in orgmode whith emacs</p> <p style="text-align: center;"><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" rel="license"><img style="border-width: 0px; display: block; margin-left: auto; margin-right: auto;" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" alt="Licencia de Creative Commons" /></a><br />Este obra est&aacute; bajo una <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" rel="license">licencia de Creative Commons Reconocimiento-NoComercial-CompartirIgual 4.0 Internacional</a>.</p><br><br><br>
